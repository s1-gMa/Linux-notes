---
tags:
  - 编译
---
## 1.1 交叉编译 hello.c

交叉编译命令示例:
	gcc 待编译文件.c -o 生成的可执行文件
	![[4 1.1交叉编译示例.png]]

## 1.2 GCC 编译过程

文件从源码到可执行文件,一般经过四个阶段:

- **预处理**(*preprocessing*)
- **编译**(*compilation*)
- **汇编**(*assembly*)
- **链接**(*linking*)
- ![[4 1.2gcc编译过程.png]]

可以使用 `-v` 选项**显示详细编译信息**,便于排查问题,例如:

- 找不到头文件
- 找不到库文件
- 链接失败等

## 1.3 GCC 总体选项与分步编译的原因

可以把四个步骤拆开进行编译,原因主要有:

- 一次性编译很多源文件时,如果只改动了其中一个文件,却让其他文件也重新编译,会浪费时间
- 通过分步编译,只需重新编译修改过的文件,再进行链接,效率更高

## 1.4 链接库文件(自制静态库与动态库)

需要掌握如何制作并链接静态库(.a)和动态库(.so):

- 静态库在链接阶段被复制到可执行文件中,生成的可执行文件体积较大,但运行时不再依赖外部库文件
- 动态库在程序运行时由系统加载,可以被多个程序共享,节省内存与磁盘空间