# 嵌入式产品
## 产品类别
**从主控芯片上可以区分为: (硬件平台)**
- MCU:
	- 面向控制
	- MCU是控制型SoC
- SoC/MPU:
	- 面向应用
- DSP:
	- 面向信号处理

**从操作系统上可以分为: (软件系统)**
- 裸机
- 类Unix(Linux/Android)
- RTOS

**常见产品架构:**
- MCU+裸机
- MCU+RTOS
- SoC+Linux/Android
- SoC+Linux/RTOS混合
	- A核跑Linux做人机交互 网络 大模型等
	- M核跑RTOS做传感采集等

## 横向对比
**和 PC 的区别**
- PC: 资源富裕 用户可以随便装软件
- 嵌入式: 功能相对固化 软件和硬件是一起设计出来的

**和手机的区别**
- 手机也是一种高端嵌入式 但生态极其统一(Android/iOS)    
- 大部分嵌入式产品是一产品一套定制系统。 

**和 IoT 的关系**
- IoT 更多是系统级概念: 设备 + 网络 + 云平台。    
- 嵌入式是这些设备里的那块***主控 + 软件***

**和 Edge Computing(边缘计算)的关系**
- Edge 一般指：在靠近现场的某个节点做本地数据处理(网关/边缘服务器)   
- 这些节点的硬件多半就是高性能 SoC + Linux 也属于嵌入式产品家族里的大哥

---
## 嵌入式系统的典型分层

**硬件层 Hardware Layer**

- 主控芯片: MCU SoC MPU DSP 等
    
- 存储器: Flash EEPROM DDR SRAM 等
    
- 外设接口: GPIO ADC DAC UART I2C SPI CAN USB Ethernet Camera Interface 等
    
- 作用: 提供计算 与 外设资源 是整个系统的物理基础
    

**启动与 BSP 层 Bootloader And BSP**

- Bootloader: 上电后最先运行的代码 负责基础硬件初始化 内存映射 加载并启动操作系统 或 应用程序
    
- BSP Board Support Package: 针对具体板级硬件的适配 包含时钟 引脚 电源 外设初始化 等
    
- 作用: 将通用操作系统 或 应用 与 具体硬件解耦
    

**操作系统层 OS Layer**

- 裸机: 无操作系统 直接在主循环 与 中断中编程
    
- RTOS: FreeRTOS RT Thread QNX VxWorks 等 提供任务调度 中断管理 同步机制
    
- 类 Unix: Linux Android 等 提供进程 虚拟内存 文件系统 网络协议栈 等
    
- 作用: 提供统一的资源管理 与 调度机制 为中间件 与 应用提供抽象
    

**中间件 与 框架层 Middleware And Framework**

- 通信协议栈: TCP IP HTTP MQTT CoAP Modbus 等
    
- 多媒体 与 图形: 音视频编解码 流水线 管线 GUI 框架 等
    
- AI 与 算法框架: 推理引擎 数学库 滤波库 传统算法库 等
    
- 系统服务: 日志 配置 管理 升级 与 OTA 安全模块 等
    
- 作用: 提供可复用能力 降低应用层重复造轮子
    

**应用层 Application Layer**

- 业务逻辑: 人脸识别开门 网关数据转发 工业设备监控 车身控制 等
    
- 人机交互: 屏幕 UI Web 管理页面 手机 App 等
    
- 云平台对接: 数据上报 命令下发 远程配置 与 OTA 等
    
- 作用: 直接体现产品功能 与 用户价值
    

---

## 嵌入式设计的约束与取舍

**成本 Cost**

- 芯片选型: MCU SoC DSP 核心数量 主频 制程 封装 等
    
- 存储 与 外设: DDR 容量 Flash 大小 传感器 与 接口数量
    
- PCB 与 结构: 层数 线长 高频设计 EMI 装配成本
    
- 目标: 在满足功能 与 性能需求的前提下 尽可能降低 BOM 与 生产成本
    

**性能 Performance**

- 计算能力: 主频 内核数量 指令集扩展 SIMD NEON NPU GPU 等
    
- 吞吐 与 带宽: 内存带宽 总线带宽 网络带宽 存储读写速度
    
- 延迟 与 响应时间: 中断响应 任务切换 算法执行时间 端到端时延
    
- 目标: 在有限资源 与 功耗约束下 满足实时性 与 吞吐量需求
    

**功耗 Power**

- 工作模式: 运行 空闲 睡眠 深度睡眠 等
    
- 优化手段: 时钟门控 电源域控制 动态电压 与 频率调整 DVFS 关断未使用外设
    
- 典型场景: 电池供电设备 可穿戴设备 远程传感节点 无人场站 等
    
- 目标: 在保证功能体验的前提下 尽可能降低平均功耗 与 峰值功耗
    

**可靠性 与 安全 Reliability And Security**

- 可靠性: 看门狗 异常恢复 崩溃转储 断电保护 抗干扰设计 等
    
- 安全性: 安全启动 固件签名 与 加密 权限控制 安全通信 等
    
- 认证要求: 车规 工业 医疗 等相关标准 与 测试
    
- 目标: 确保设备长期稳定运行 不轻易被攻击 或 误操作破坏
    

---

## 实时性分类

**Hard Real Time 硬实时**

- 定义: 截止时间绝对不能被违反 超时可能导致安全事故 或 严重后果
    
- 典型场景: 安全气囊控制 列车制动 电机过流保护 一些安全相关控制回路
    
- 常见架构: MCU + 裸机 MCU + RTOS M 核 RTOS
    

**Soft Real Time 软实时**

- 定义: 对响应时间有要求 偶尔超时只会降低服务质量 或 用户体验 不会直接造成灾难性后果
    
- 典型场景: 视频播放 语音通话 网络会议 网关数据转发 一般人机交互
    
- 常见架构: Linux 上的高优先级线程 或 RTOS 上的中高优先级任务
    

**Non Real Time 非实时**

- 定义: 对响应时间无严格约束 更关注吞吐量 可维护性 与 资源利用率
    
- 典型场景: 日志归档 报表生成 批处理 数据分析 云端计算 等
    
- 常见架构: 通用 Linux 容器 虚拟化 等通用计算平台
    

**工程中的混合情况**

- 同一个产品中 Hard RT Soft RT Non RT 常常同时存在
    
- 常见分工: 独立 MCU 或 M 核 负责 Hard RT SoC A 核 负责 Soft RT 与 Non RT
    
- 设计时需要为每个模块标注实时等级 决定主控选型 与 操作系统方案